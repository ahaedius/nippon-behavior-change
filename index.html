<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Strategic Taxonomy – Nippon Life Behavior Change</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --sans:  'DM Sans', system-ui, sans-serif;
      --serif: 'DM Serif Display', Georgia, serif;
      --ink:       #0D0D0D;
      --ink-mid:   #3D3D3D;
      --ink-soft:  #6B6B6B;
      --ink-faint: #A0A0A0;
      --paper:     #F6F5F2;
      --white:     #FFFFFF;
      --rule:      #E5E3DD;
      --rule-dark: #C8C4BC;
      --access:  #2B8CB3;
      --support: #2A9E72;
      --sustain: #D97B35;
      --ease: cubic-bezier(0.4, 0, 0.2, 1);
    }

    html { scroll-behavior: smooth; }
    body {
      font-family: var(--sans);
      background: var(--paper);
      color: var(--ink);
      min-height: 100vh;
      font-size: 15px;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    /* ═══════════════════════════════════════════════
       SHARED NAV
    ═══════════════════════════════════════════════ */
    .site-nav {
      position: sticky; top: 0; z-index: 200;
      background: #111; border-bottom: 1px solid #2A2A2A;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 28px; height: 50px;
    }
    .nav-brand {
      font: 600 12px var(--sans);
      letter-spacing: .06em; text-transform: uppercase;
      color: rgba(255,255,255,.55);
    }
    .nav-links { display: flex; gap: 4px; }
    .nav-links a {
      font: 500 12px var(--sans);
      letter-spacing: .04em;
      color: rgba(255,255,255,.5);
      text-decoration: none;
      padding: 6px 12px; border-radius: 3px;
      transition: background .15s, color .15s;
    }
    .nav-links a:hover { color: #fff; background: rgba(255,255,255,.08); }
    .nav-links a.active { color: #fff; background: rgba(255,255,255,.12); }

    /* ═══════════════════════════════════════════════
       LAYOUT
    ═══════════════════════════════════════════════ */
    .container {
      max-width: 780px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* ═══════════════════════════════════════════════
       HERO
    ═══════════════════════════════════════════════ */
    .hero {
      padding: 64px 0 48px;
      border-bottom: 1px solid var(--rule);
    }
    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: var(--ink-faint);
      margin-bottom: 20px;
    }
    .eyebrow-line { width: 24px; height: 1px; background: var(--rule-dark); }
    .hero h1 {
      font-family: var(--serif);
      font-size: clamp(28px, 4.5vw, 44px);
      font-weight: 400;
      color: var(--ink);
      line-height: 1.15;
      letter-spacing: -.015em;
      margin-bottom: 6px;
    }
    .hero-sub {
      font-family: var(--serif);
      font-size: clamp(16px, 2vw, 20px);
      font-weight: 400;
      color: var(--ink-soft);
      font-style: italic;
      margin-bottom: 20px;
    }
    .focus-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 28px;
    }
    .focus-tag {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: .07em;
      text-transform: uppercase;
      color: var(--ink-soft);
      background: var(--white);
      border: 1px solid var(--rule-dark);
      border-radius: 2px;
      padding: 4px 10px;
    }
    .exec-summary {
      max-width: 620px;
      font-size: 15px;
      color: var(--ink-mid);
      line-height: 1.72;
    }
    .exec-summary strong { color: var(--ink); font-weight: 600; }

    /* ═══════════════════════════════════════════════
       BRIDGE VISUAL
    ═══════════════════════════════════════════════ */
    .bridge-section {
      padding: 40px 0;
      border-bottom: 1px solid var(--rule);
    }
    .bridge-grid {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 0;
    }
    .bridge-side {
      background: var(--white);
      border: 1px solid var(--rule);
      border-radius: 4px;
      padding: 16px 20px;
      text-align: center;
    }
    .bridge-side-label {
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .06em;
      text-transform: uppercase;
      color: var(--ink-soft);
      margin-bottom: 5px;
    }
    .bridge-side-sub {
      font-size: 11.5px;
      color: var(--ink-faint);
      line-height: 1.4;
    }
    .bridge-arrow {
      width: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 2px;
    }
    .bridge-arrow-line {
      width: 36px;
      height: 1px;
      background: var(--rule-dark);
      position: relative;
    }
    .bridge-arrow-line::after {
      content: '';
      position: absolute;
      right: 0; top: -3px;
      border: 4px solid transparent;
      border-left-color: var(--rule-dark);
    }
    .bridge-center {
      background: #111;
      color: #fff;
      border-radius: 4px;
      padding: 18px 28px;
      text-align: center;
      margin: 0 4px;
    }
    .bridge-center-label {
      font-family: var(--serif);
      font-size: 17px;
      font-weight: 400;
      margin-bottom: 3px;
    }
    .bridge-center-sub {
      font-size: 10.5px;
      font-weight: 600;
      letter-spacing: .1em;
      text-transform: uppercase;
      color: rgba(255,255,255,.45);
    }
    @media (max-width: 560px) {
      .bridge-grid { grid-template-columns: 1fr; gap: 8px; }
      .bridge-arrow { display: none; }
    }

    /* ═══════════════════════════════════════════════
       SECTION HEADERS
    ═══════════════════════════════════════════════ */
    .section-block {
      padding: 52px 0 0;
    }
    .section-block + .section-block { padding-top: 48px; }

    .section-kicker {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: var(--ink-faint);
      margin-bottom: 10px;
    }
    .section-kicker-num {
      width: 20px; height: 20px;
      border-radius: 50%;
      background: var(--ink);
      color: #fff;
      display: flex; align-items: center; justify-content: center;
      font-size: 10px; font-weight: 700;
    }
    .section-title {
      font-family: var(--serif);
      font-size: clamp(20px, 3vw, 28px);
      font-weight: 400;
      color: var(--ink);
      line-height: 1.2;
      letter-spacing: -.01em;
      margin-bottom: 6px;
    }
    .section-desc {
      font-size: 13.5px;
      color: var(--ink-soft);
      font-style: italic;
      margin-bottom: 28px;
    }

    /* ═══════════════════════════════════════════════
       DOMAIN ACCORDION
    ═══════════════════════════════════════════════ */
    .domains-list {
      display: flex;
      flex-direction: column;
      gap: 2px;
      margin-bottom: 52px;
    }

    .domain-item {
      background: var(--white);
      border: 1px solid var(--rule);
      overflow: hidden;
    }
    .domain-item:first-child { border-radius: 4px 4px 0 0; }
    .domain-item:last-child  { border-radius: 0 0 4px 4px; }

    /* Trigger */
    .domain-trigger {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 0;
      padding: 0;
      border: none;
      background: #111;
      cursor: pointer;
      text-align: left;
      transition: background .15s;
    }
    .domain-trigger:hover { background: #1A1A1A; }
    .domain-trigger:focus-visible { outline: 2px solid rgba(255,255,255,.4); outline-offset: -2px; }

    .dt-strip {
      width: 5px;
      align-self: stretch;
      background: var(--dc);
      flex-shrink: 0;
    }
    .dt-num {
      font-family: var(--serif);
      font-size: 32px;
      color: var(--dc);
      line-height: 1;
      padding: 16px 16px 16px 20px;
      flex-shrink: 0;
    }
    .dt-text { flex: 1; padding: 16px 0; }
    .dt-layer-tag {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 9.5px;
      font-weight: 700;
      letter-spacing: .1em;
      text-transform: uppercase;
      color: var(--dc);
      margin-bottom: 3px;
    }
    .dt-layer-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--dc); }
    .dt-name {
      font-family: var(--serif);
      font-size: clamp(15px, 2vw, 18px);
      font-weight: 400;
      color: #fff;
      line-height: 1.2;
    }
    .dt-subtitle {
      font-size: 12px;
      color: rgba(255,255,255,.45);
      font-style: italic;
      margin-top: 3px;
    }
    .dt-right {
      padding: 16px 18px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .dt-focus-pill {
      font-size: 10.5px;
      font-weight: 500;
      color: rgba(255,255,255,.35);
      white-space: nowrap;
      max-width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    @media (max-width: 520px) { .dt-focus-pill { display: none; } }
    .dt-chevron {
      width: 26px; height: 26px;
      border-radius: 50%;
      border: 1px solid rgba(255,255,255,.18);
      display: flex; align-items: center; justify-content: center;
      color: rgba(255,255,255,.6);
      transition: transform .28s var(--ease), border-color .2s;
      flex-shrink: 0;
    }
    .dt-chevron svg { width: 13px; height: 13px; }
    .domain-trigger[aria-expanded="true"] .dt-chevron {
      transform: rotate(180deg);
      border-color: var(--dc);
      color: var(--dc);
    }

    /* Panel */
    .domain-panel {
      display: grid;
      grid-template-rows: 0fr;
      transition: grid-template-rows .32s var(--ease);
    }
    .domain-panel.open { grid-template-rows: 1fr; }
    .domain-panel > .dp-inner { overflow: hidden; min-height: 0; }

    .dp-body {
      background: var(--white);
      border-top: 2px solid var(--dc);
      padding: 24px 28px 28px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px 32px;
    }
    @media (max-width: 600px) {
      .dp-body { grid-template-columns: 1fr; gap: 18px; padding: 18px; }
    }

    .dp-field-label {
      font-size: 9.5px;
      font-weight: 700;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--dc);
      margin-bottom: 6px;
    }
    .dp-field-text {
      font-size: 13.5px;
      color: var(--ink-mid);
      line-height: 1.65;
    }
    .dp-constructs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .dp-construct-tag {
      font-size: 11px;
      font-weight: 500;
      color: var(--ink-mid);
      background: var(--paper);
      border: 1px solid var(--rule-dark);
      border-radius: 2px;
      padding: 3px 9px;
    }
    .dp-insurer-box {
      background: var(--paper);
      border-left: 3px solid var(--dc);
      padding: 12px 14px;
      font-size: 13px;
      color: var(--ink-mid);
      line-height: 1.6;
      grid-column: 1 / -1;
    }
    .dp-comb-tag {
      grid-column: 1 / -1;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: .05em;
      color: var(--dc);
      font-style: italic;
    }

    /* ═══════════════════════════════════════════════
       ARCHETYPES GRID
    ═══════════════════════════════════════════════ */
    .archetypes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 10px;
      margin-bottom: 52px;
    }
    @media (max-width: 560px) { .archetypes-grid { grid-template-columns: 1fr; } }

    .archetype-card {
      background: var(--white);
      border: 1px solid var(--rule);
      border-radius: 4px;
      overflow: hidden;
      transition: box-shadow .2s, transform .2s;
    }
    .archetype-card:hover {
      box-shadow: 0 6px 24px rgba(0,0,0,.09);
      transform: translateY(-2px);
    }
    .ac-header {
      background: #111;
      padding: 18px 20px 16px;
      border-left: 5px solid var(--ac);
    }
    .ac-kicker {
      font-size: 9.5px;
      font-weight: 700;
      letter-spacing: .12em;
      text-transform: uppercase;
      color: var(--ac);
      margin-bottom: 4px;
      display: flex; align-items: center; gap: 5px;
    }
    .ac-name {
      font-family: var(--serif);
      font-size: 20px;
      font-weight: 400;
      color: #fff;
      line-height: 1.2;
      margin-bottom: 2px;
    }
    .ac-subtitle {
      font-size: 11.5px;
      color: rgba(255,255,255,.45);
      font-style: italic;
    }
    .ac-body { padding: 16px 20px 18px; }
    .ac-row {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .ac-field-label {
      font-size: 9.5px;
      font-weight: 700;
      letter-spacing: .1em;
      text-transform: uppercase;
      color: var(--ink-faint);
      margin-bottom: 3px;
    }
    .ac-field-text {
      font-size: 13px;
      color: var(--ink-mid);
      line-height: 1.55;
    }
    .ac-domains {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .ac-domain-badge {
      font-size: 10.5px;
      font-weight: 700;
      color: #fff;
      border-radius: 3px;
      padding: 3px 8px;
    }

    /* ═══════════════════════════════════════════════
       REFERENCES
    ═══════════════════════════════════════════════ */
    .references-section {
      padding: 40px 0;
      border-top: 1px solid var(--rule);
      margin-top: 8px;
    }
    .ref-title {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: .14em;
      text-transform: uppercase;
      color: var(--ink-faint);
      margin-bottom: 14px;
    }
    .ref-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .ref-item {
      font-size: 13px;
      color: var(--ink-soft);
      line-height: 1.5;
    }
    .ref-item strong { color: var(--ink-mid); font-weight: 600; }

    /* ═══════════════════════════════════════════════
       CTA FOOTER
    ═══════════════════════════════════════════════ */
    .page-cta {
      background: #111;
      margin-top: 48px;
    }
    .page-cta-inner {
      max-width: 780px;
      margin: 0 auto;
      padding: 36px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }
    .page-cta-text {
      font-size: 13px;
      color: rgba(255,255,255,.5);
      line-height: 1.5;
    }
    .page-cta-text strong {
      display: block;
      font-family: var(--serif);
      font-size: 18px;
      font-weight: 400;
      color: #fff;
      margin-bottom: 4px;
    }
    .page-cta-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: .04em;
      color: #fff;
      text-decoration: none;
      border: 1px solid rgba(255,255,255,.25);
      border-radius: 3px;
      padding: 10px 18px;
      white-space: nowrap;
      transition: background .15s, border-color .15s;
      flex-shrink: 0;
    }
    .page-cta-link:hover { background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.4); }
    .page-cta-link svg { width: 14px; height: 14px; }
  </style>
</head>
<body>

<!-- ── NAV ── -->
<nav class="site-nav">
  <span class="nav-brand">Nippon Life &middot; Behavior Change</span>
  <div class="nav-links">
    <a href="index.html" class="active">Taxonomy</a>
    <a href="three-layers.html">3-Layer Model &amp; Cases</a>
  </div>
</nav>

<!-- ── HERO ── -->
<section class="hero">
  <div class="container">
    <div class="eyebrow"><span class="eyebrow-line"></span>Strategic Taxonomy &nbsp;·&nbsp; Design Dictionary<span class="eyebrow-line"></span></div>
    <h1>Behavior Change in Healthcare</h1>
    <p class="hero-sub">Strategic Taxonomy for Insurer-Led Programs</p>
    <div class="focus-tags">
      <span class="focus-tag">Healthy Aging</span>
      <span class="focus-tag">Chronic Disease Management</span>
      <span class="focus-tag">Pre-Disease Risk</span>
    </div>
    <div class="exec-summary">
      <p>This taxonomy guides Nippon Life's investment, partnership, and product strategies for behavior change. It bridges the gap between <strong>academic rigor</strong> (Behavioral Economics, Implementation Science) and <strong>insurer levers</strong> (Product Design, Contracting, Member Engagement).</p>
      <br>
      <p>Designed as a <strong>"Design Dictionary"</strong> for cross-functional teams, the framework has two layers: the <strong>6 Action Domains</strong> — the functional ingredients required to change behavior — and the <strong>6 Implementation Archetypes</strong> — market packages that combine those domains into concrete products and services.</p>
    </div>
  </div>
</section>

<!-- ── BRIDGE ── -->
<section class="bridge-section">
  <div class="container">
    <div class="bridge-grid">
      <div class="bridge-side">
        <div class="bridge-side-label">Academic Rigor</div>
        <div class="bridge-side-sub">Behavioral Economics<br>Implementation Science</div>
      </div>
      <div class="bridge-arrow">
        <div class="bridge-arrow-line"></div>
      </div>
      <div class="bridge-center">
        <div class="bridge-center-label">Strategic Taxonomy</div>
        <div class="bridge-center-sub">Design Dictionary</div>
      </div>
      <div class="bridge-arrow" style="transform:scaleX(-1)">
        <div class="bridge-arrow-line"></div>
      </div>
      <div class="bridge-side">
        <div class="bridge-side-label">Insurer Levers</div>
        <div class="bridge-side-sub">Product Design<br>Contracting &amp; Engagement</div>
      </div>
    </div>
  </div>
</section>

<!-- ── LAYER 1: DOMAINS ── -->
<section class="section-block">
  <div class="container">
    <div class="section-kicker">
      <span class="section-kicker-num">1</span> Layer 1 &nbsp;·&nbsp; The Mechanisms
    </div>
    <h2 class="section-title">The 6 Action Domains</h2>
    <p class="section-desc">The functional ingredients required to change behavior — mapped to COM-B and the 3-Layer Model.</p>
    <div class="domains-list" id="domains-list"></div>
  </div>
</section>

<!-- ── LAYER 2: ARCHETYPES ── -->
<section class="section-block">
  <div class="container">
    <div class="section-kicker">
      <span class="section-kicker-num">2</span> Layer 2 &nbsp;·&nbsp; The Models
    </div>
    <h2 class="section-title">The 6 Implementation Archetypes</h2>
    <p class="section-desc">Market packages that combine action domains into concrete products, services, and insurer roles.</p>
    <div class="archetypes-grid" id="archetypes-grid"></div>
  </div>
</section>

<!-- ── REFERENCES ── -->
<div class="container">
  <div class="references-section">
    <div class="ref-title">Selected References &amp; Frameworks</div>
    <div class="ref-list">
      <div class="ref-item"><strong>Theory:</strong> COM-B (Michie et al.), Self-Determination Theory (Ryan &amp; Deci)</div>
      <div class="ref-item"><strong>Implementation:</strong> RE-AIM (Glasgow et al.), CFIR (Damschroder et al.)</div>
      <div class="ref-item"><strong>Economics:</strong> Nudge/Sludge (Thaler, Sunstein), VBID (Chernew, Fendrick)</div>
    </div>
  </div>
</div>

<!-- ── FOOTER CTA ── -->
<div class="page-cta">
  <div class="page-cta-inner">
    <div class="page-cta-text">
      <strong>3-Layer Model &amp; Case Studies</strong>
      See how these domains map to the Access, Support, and Sustain layers — with real-world program examples from NHS, Omada, Vitality, Apple, and more.
    </div>
    <a href="three-layers.html" class="page-cta-link">
      Explore Case Studies
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
    </a>
  </div>
</div>

<script>
/* ═══════════════════════════════════════════════════════
   DATA
═══════════════════════════════════════════════════════ */
const DOMAINS = [
  {
    id: 'd1', number: 1,
    name: 'Pathway, Environment & Access Design',
    subtitle: 'Designing the "Path of Least Resistance"',
    layerTag: 'Access Layer', color: '#2B8CB3',
    primaryFocus: 'Remove Friction: Make action feasible and complete.',
    concept: 'People often fail not because they don\'t want to act, but because the process is hard. "Sludge" (friction) reduces uptake.',
    constructs: ['Choice Architecture', 'Defaults', 'Active Choice', 'Friction Costs', 'Closed-loop Workflows'],
    insurerActions: 'Journey simplification, "closed-loop" navigation, default settings (opt-out), eliminating "sludge."',
    insurerApplication: 'Eliminate steps in evidence submission; use opt-out enrollment for disease management programs; simplify appointment booking.',
    comB: 'COM-B: Opportunity (Physical)'
  },
  {
    id: 'd2', number: 2,
    name: 'Capability Building & Coaching',
    subtitle: 'Closing the "Know-Do" Gap',
    layerTag: 'Support Layer', color: '#2A9E72',
    primaryFocus: 'Build Skills: Enable self-management.',
    concept: 'Chronic care requires skills (monitoring, planning), not just willpower.',
    constructs: ['Self-Efficacy', 'Goal Setting', 'Action Planning', 'Motivational Interviewing (MI)', 'CBT'],
    insurerActions: 'Vendor selection (digital/hybrid), referral triggers, tiered support models.',
    insurerApplication: 'Select vendors that use evidence-based coaching (not just "cheerleading"); integrate digital therapeutics (DTx) into coverage.',
    comB: 'COM-B: Capability (Psychological)'
  },
  {
    id: 'd3', number: 3,
    name: 'Self-Regulation, Habits & Maintenance',
    subtitle: 'Solving for the "Decay Curve"',
    layerTag: 'Sustain Layer', color: '#D97B35',
    primaryFocus: 'Sustain: Design for durability and relapse.',
    concept: 'Initial motivation fades. Durability comes from habits and recovery from lapses.',
    constructs: ['Implementation Intentions ("If-Then" plans)', 'Habit Loops (Cue-Routine-Reward)', 'Relapse Prevention', 'Fresh Start Effect'],
    insurerActions: 'Re-engagement flows, habit scaffolding, "fresh start" cues, long-term monitoring.',
    insurerApplication: 'Move beyond 12-week challenges to 12-month maintenance structures; design non-punitive re-entry paths for members who lapse.',
    comB: 'COM-B: Motivation (Automatic)'
  },
  {
    id: 'd4', number: 4,
    name: 'Incentives, Reinforcement & Economic Levers',
    subtitle: 'Aligning Value and Price',
    layerTag: 'Support Layer', color: '#2A9E72',
    primaryFocus: 'Reinforce: Align motivation via benefits/price.',
    concept: 'Economic levers can initiate behavior, but design matters — loss aversion is stronger than gain.',
    constructs: ['Loss Aversion', 'Present Bias', 'VBID', 'Pay-for-Performance (P4P)', 'Regret Lotteries'],
    insurerActions: 'VBID (Value-Based Insurance Design), smart incentives (loss-framed/lotteries), outcomes-based contracting.',
    insurerApplication: 'Waive copays for high-value medications (VBID); use "loss-framed" incentives for adherence; align provider contracts with patient behavioral outcomes.',
    comB: 'COM-B: Motivation (Reflective)'
  },
  {
    id: 'd5', number: 5,
    name: 'Social Support, Norms & Community',
    subtitle: 'Leveraging the Network',
    layerTag: 'Support Layer', color: '#2A9E72',
    primaryFocus: 'Connect: Leverage social capital.',
    concept: 'Health behaviors are contagious. Isolation is a risk factor for aging.',
    constructs: ['Social Norms (Descriptive vs. Injunctive)', 'Social Proof', 'Caregiver Support', 'Instrumental Support'],
    insurerActions: 'Peer support systems, caregiver integration, community linkages, normative messaging.',
    insurerApplication: 'Involve family members in care plans (with consent); facilitate peer groups for specific conditions (e.g., diabetes); normalize help-seeking.',
    comB: 'COM-B: Opportunity (Social)'
  },
  {
    id: 'd6', number: 6,
    name: 'Communication, Attention & Decision Support',
    subtitle: 'Respecting Limited Bandwidth',
    layerTag: 'Sustain Layer', color: '#D97B35',
    primaryFocus: 'Clarify: Reduce cognitive load.',
    concept: 'Attention is a scarce resource. Information overload leads to inaction.',
    constructs: ['Cognitive Load', 'Decision Fatigue', 'Plain Language', 'Icon Arrays (Risk Visualization)', 'Shared Decision Making'],
    insurerActions: 'Plain language, risk visualization, decision aids, "just-in-time" notifications.',
    insurerApplication: 'Simplify benefit explanations; use "teach-back" methods in call centers; ensure risk communications (e.g., screening results) are actionable and clear.',
    comB: 'COM-B: Capability (Psychological)'
  }
];

const ARCHETYPES = [
  {
    id: 'architect', number: 1,
    name: 'The Architect',
    subtitle: 'Choice Architecture & Pathway Design',
    color: '#2B8CB3',
    coreDomains: [1, 3],
    insurerRole: 'Orchestrator of the care journey',
    focus: 'Changing the "path of least resistance" so the healthy choice is easy.'
  },
  {
    id: 'coach', number: 2,
    name: 'The Coach',
    subtitle: 'Skills & Hybrid Care',
    color: '#2A9E72',
    coreDomains: [2],
    insurerRole: 'Payer/Partner for clinical coaching vendors',
    focus: 'Closing the skill gap for chronic disease self-management.'
  },
  {
    id: 'economist', number: 3,
    name: 'The Economist',
    subtitle: 'Contingent Incentives & Benefits',
    color: '#2A9E72',
    coreDomains: [4],
    insurerRole: 'Product Designer (VBID, Rewards)',
    focus: 'Using financial/material levers to jumpstart behavior.'
  },
  {
    id: 'connector', number: 4,
    name: 'The Connector',
    subtitle: 'Social Capital & Peer Systems',
    color: '#2A9E72',
    coreDomains: [5],
    insurerRole: 'Community builder or connector to local resources',
    focus: 'Addressing isolation and leveraging peer accountability — critical for aging.'
  },
  {
    id: 'navigator', number: 5,
    name: 'The Navigator',
    subtitle: 'Clinical Pathway Scaffolding',
    color: '#2B8CB3',
    coreDomains: [1, 6],
    insurerRole: 'Guide/Concierge',
    focus: 'Ensuring adherence to complex clinical protocols through logistics support.'
  },
  {
    id: 'analyst', number: 6,
    name: 'The Analyst',
    subtitle: 'Precision Engagement / JITAI',
    color: '#D97B35',
    coreDomains: [6],
    domainNote: '+ Data-driven timing',
    insurerRole: 'Data Platform & Messenger',
    focus: 'Delivering the right nudge at the right time (Just-In-Time Adaptive Interventions).'
  }
];

/* Domain colour lookup */
const DOMAIN_COLOR = {};
DOMAINS.forEach(d => { DOMAIN_COLOR[d.number] = d.color; });

/* ═══════════════════════════════════════════════════════
   ICONS
═══════════════════════════════════════════════════════ */
const CHEVRON = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>`;

/* ═══════════════════════════════════════════════════════
   RENDER DOMAINS
═══════════════════════════════════════════════════════ */
function renderDomains() {
  const list = document.getElementById('domains-list');
  DOMAINS.forEach(d => {
    const item = document.createElement('div');
    item.className = 'domain-item';
    item.style.setProperty('--dc', d.color);

    const trigger = document.createElement('button');
    trigger.className = 'domain-trigger';
    trigger.setAttribute('aria-expanded', 'false');
    trigger.setAttribute('aria-controls', `dp-${d.id}`);
    trigger.innerHTML = `
      <div class="dt-strip"></div>
      <div class="dt-num">${String(d.number).padStart(2,'0')}</div>
      <div class="dt-text">
        <div class="dt-layer-tag"><span class="dt-layer-dot"></span>${d.layerTag}</div>
        <div class="dt-name">${d.name}</div>
        <div class="dt-subtitle">${d.subtitle}</div>
      </div>
      <div class="dt-right">
        <span class="dt-focus-pill">${d.primaryFocus}</span>
        <div class="dt-chevron">${CHEVRON}</div>
      </div>`;

    const panel = document.createElement('div');
    panel.className = 'domain-panel';
    panel.id = `dp-${d.id}`;

    const inner = document.createElement('div');
    inner.className = 'dp-inner';

    const body = document.createElement('div');
    body.className = 'dp-body';
    body.style.setProperty('--dc', d.color);
    body.innerHTML = `
      <div>
        <div class="dp-field-label">Concept</div>
        <div class="dp-field-text">${d.concept}</div>
      </div>
      <div>
        <div class="dp-field-label">Key Constructs</div>
        <div class="dp-constructs">
          ${d.constructs.map(c => `<span class="dp-construct-tag">${c}</span>`).join('')}
        </div>
      </div>
      <div class="dp-insurer-box">
        <div class="dp-field-label" style="margin-bottom:5px">High-Leverage Insurer Actions</div>
        ${d.insurerActions}
      </div>
      <div class="dp-insurer-box" style="border-left-color:var(--rule-dark);background:var(--white)">
        <div class="dp-field-label" style="margin-bottom:5px;color:var(--ink-faint)">Insurer Application</div>
        ${d.insurerApplication}
      </div>
      <div class="dp-comb-tag">${d.comB}</div>`;

    inner.appendChild(body);
    panel.appendChild(inner);
    item.appendChild(trigger);
    item.appendChild(panel);
    list.appendChild(item);
  });
}

/* ═══════════════════════════════════════════════════════
   RENDER ARCHETYPES
═══════════════════════════════════════════════════════ */
function renderArchetypes() {
  const grid = document.getElementById('archetypes-grid');
  ARCHETYPES.forEach(a => {
    const card = document.createElement('div');
    card.className = 'archetype-card';
    card.style.setProperty('--ac', a.color);

    const domainBadges = a.coreDomains.map(n => `
      <span class="ac-domain-badge" style="background:${DOMAIN_COLOR[n]}">D${n}</span>
    `).join('') + (a.domainNote ? `<span style="font-size:11px;color:var(--ink-faint);align-self:center;margin-left:2px">${a.domainNote}</span>` : '');

    card.innerHTML = `
      <div class="ac-header">
        <div class="ac-kicker">
          <span style="width:5px;height:5px;border-radius:50%;background:var(--ac);display:inline-block"></span>
          Archetype ${a.number}
        </div>
        <div class="ac-name">${a.name}</div>
        <div class="ac-subtitle">${a.subtitle}</div>
      </div>
      <div class="ac-body">
        <div class="ac-row">
          <div>
            <div class="ac-field-label">Core Mechanisms</div>
            <div class="ac-domains">${domainBadges}</div>
          </div>
          <div>
            <div class="ac-field-label">Insurer Role</div>
            <div class="ac-field-text">${a.insurerRole}</div>
          </div>
          <div>
            <div class="ac-field-label">Focus</div>
            <div class="ac-field-text">${a.focus}</div>
          </div>
        </div>
      </div>`;
    grid.appendChild(card);
  });
}

/* ═══════════════════════════════════════════════════════
   EVENTS
═══════════════════════════════════════════════════════ */
function attachEvents() {
  document.getElementById('domains-list').querySelectorAll('.domain-trigger').forEach(t => {
    const panel = document.getElementById(t.getAttribute('aria-controls'));
    t.addEventListener('click', () => {
      const open = t.getAttribute('aria-expanded') === 'true';
      t.setAttribute('aria-expanded', String(!open));
      panel.classList.toggle('open', !open);
    });
    t.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); t.click(); }
    });
  });
}

renderDomains();
renderArchetypes();
attachEvents();
</script>
</body>
</html>
